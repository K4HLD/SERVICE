<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMDJ9uWO14/kQoSA+6x0AuwB/6B50/b7g21L8s5tI6/A6qA2wF2sL6gI2l6F6uFg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K4HLD Store - K4HLD STORE</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* ุฅุฎูุงุก ูุณู Firebase ูู ุงููุถุน ุงูุงูุชุฑุงุถู ุฃู ุนูุฏ ุนุฏู ุงูุญุงุฌุฉ */
        .firebase-auth-container {
            padding: 20px;
            margin: 20px auto;
            border-radius: 8px;
            max-width: 400px;
            background: #f8f8f8;
            border: 1px solid #eee;
        }
        #purchase-section {
            border: 1px dashed #ccc;
            padding: 15px;
            margin-top: 10px;
        }
    </style>

</head>
<body>

    <header class="header">
        <div class="container">
            <a href="#" class="logo">K4HLD Store</a>
            <nav class="nav">
                <ul>
                    <li><a href="#services">ุฎุฏูุงุชูุง</a></li>
                    <li><a href="#why-us">ููุงุฐุง ูุญู</a></li>
                    <li><a href="#contact">ุงุชุตู ุจูุง</a></li>
                    <li><a href="#" id="auth-link">ุชุณุฌูู/ุณุฌู ุงูุดุฑุงุก</a></li>
                </ul>
            </nav>
            <div class="menu-icon"><i class="fas fa-bars"></i></div>
        </div>
    </header>

    <section id="firebase-auth-section" class="firebase-auth-container" style="display:none;">
        
        <div id="auth-ui">
            <h3>ุชุณุฌูู ุฌุฏูุฏ</h3>
            <form id="signup-form">
                <input type="email" id="signup-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                <input type="password" id="signup-password" placeholder="ูููุฉ ุงููุฑูุฑ (ุฃูุซุฑ ูู 6 ุฃุญุฑู)" required>
                <button type="submit">ุฅูุดุงุก ุญุณุงุจ</button>
            </form>
            
            <hr>
            
            <h3>ุชุณุฌูู ุงูุฏุฎูู</h3>
            <form id="login-form">
                <input type="email" id="login-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                <input type="password" id="login-password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                <button type="submit">ุฏุฎูู</button>
            </form>
        </div>

        <div id="purchase-section" style="display:none;">
            <h2>ูุฑุญุจุงู ุจู! <span id="user-email-display" style="color: #007bff;"></span></h2>
            <button id="logout-btn">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            <hr>

            <h4>ุชูุซูู ุนูููุฉ ุดุฑุงุก ุฌุฏูุฏุฉ:</h4>
            <input type="text" id="item-name" placeholder="ุงุณู ุงูููุชุฌ/ุงูุฎุฏูุฉ" required>
            <input type="number" id="item-price" placeholder="ุงููููุฉ ุจุงูุฏุฑูู (ูุซูุงู: 150)" required>
            <button id="add-purchase-btn">ุชูุซูู ุงูุดุฑุงุก</button>

            <hr>
            <h4>ุณุฌู ุงููุดุชุฑูุงุช ุงูุฎุงุต ุจู:</h4>
            <ul id="history-list">
                </ul>
        </div>
        <p id="status-message" style="color:red;"></p>
    </section>

    <section class="hero">
        <div class="container hero-content">
            <div class="text-content">
                <h1>ุฃููุงู ุจู ูู ูุชุฌุฑูุง</h1>
                <p>ุงุจุญุซ ุนู ุฌููุน ุงูุฎุฏูุงุช ุงูุชู ุชุฑูุฏูุง ุจุฃูุถู ุงูุฃุณุนุงุฑ ุณุฑุนุฉ - ุฃูุงู - ูุซูุฉ.</p>
                <div class="hero-buttons">
                    <a href="#services" class="btn btn-primary">ุนุฑุถ ุงูุฎุฏูุงุช</a>
                    <a href="https://wa.me/212770306095" class="btn btn-secondary" target="_blank">
                        <i class="fab fa-whatsapp"></i> ุงุชุตู ุนูู ูุงุชุณุงุจ
                    </a>
                </div>
            </div>
            <div class="image-content">
                <img src="IMG_20251002_012232.jpg" alt="ุดุฎุตูุฉ ูุชุฌุฑ">
            </div>
        </div>
    </section>

    <section id="services" class="services">
        <div class="container">
            <h2>ุฎุฏูุงุชูุง</h2>
            <div class="cards-grid">
                <div class="service-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0NA457V5sNKis6B8XdFqPmFu4IjrkQtp7zZYTgM9hTQ&s=10" alt="Free Fire">
                    <h3>Free Fire</h3>
                    <p>ุงุดุญู ุฌูุงูุฑ ูุฑู ูุงูุฑ ุจุฃูุงู ูุนูู ุงูููุฑ.</p>
                    <a href="freefire.html" class="card-link">ุนุฑุถ ุงูููุชุฌุงุช</a>
                </div>
                <div class="service-card">
                    <img src="https://i.pinimg.com/originals/c5/ba/4b/c5ba4bc7eeaec96b7f228fad9b86fad6.jpg" alt="Free Fire">
                    <h3>eFOOTBALL</h3>
                    <p>ุงุดุญู ุนููุงุช ุงูููุชุจูู ุจุฃุณุนุงุฑ ุชูุงูุณูุฉ!.</p>
                    <a href="efootball.html" class="card-link">ุนุฑุถ ุงูููุชุฌุงุช</a>
                </div>
                <div class="service-card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS9pOh4Zqwg_MyOhi0-Ep6vuTfYUFW3ENdl0XLlW2pAc0JqgqftjkbU0rM&s=10" alt="Netflix">
                    <h3>Netflix</h3>
                    <p>ุงุญุตู ุนูู ุงุดุชุฑุงูุงุช ูุชููููุณ 4K ุจุฃุณุนุงุฑ ููุงุณุจุฉ.</p>
                    <a href="netflix.html" class="card-link">ุนุฑุถ ุงูููุชุฌุงุช</a>
                </div>
                <div class="service-card">
                    <img src="https://i.ibb.co/YTbF918W/1000-F-479093103-ixzzt-AVf-Vzvbf-Bky-Mx-Pt-WLkz-Xm88-YHk-V.jpg" alt="Social media services">
                    <h3>ุฎุฏูุงุช ุงูุชูุงุตู ุงูุงุฌุชูุงุนู</h3>
                    <p>ูู ุจุชุนุฒูุฒ ุญุณุงุจุงุชู ุจุฃูุถู ุฎุฏูุงุชูุง.</p>
                    <a href="#" class="card-link" id="smm-soon-btn">ุนุฑุถ ุงูููุชุฌุงุช</a> 
                </div> </div>     </div>         </section>        <section id="why-us" class="features">
        <div class="container">
            <h2>ููุงุฐุง ุชุฎุชุงุฑูุงุ</h2>
            <div class="cards-grid">
                <div class="feature-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>ุฃูุงู 100%</h3>
                    <p>ูุนุงููุงุช ุขููุฉ ูุณุฑูุนุฉ .</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-truck-fast"></i>
                    <h3>ุชุณููู ููุฑู</h3>
                    <p>ุงุณุชูู ุฎุฏูุชู ููุฑุงู ุจุนุฏ ุฅุชูุงู ุนูููุฉ ุงูุฏูุน.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-headset"></i>
                    <h3>ุฏุนู 24/7</h3>
                    <p>ูุญู ูุชุงุญูู ุฏุงุฆูุงู ููุณุงุนุฏุชู ูู ุฃู ููุช.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="payments">
        <div class="container">
            <h2>ุทุฑู ุงูุฏูุน</h2>
            <div class="payment-logos">
                <img src="https://i.ibb.co/qLYrwP4v/p-Aa3-RS7m-400x400.png" alt="CIH">
                <img src="https://i.ibb.co/G4XwmfZT/81717516-2471020243215670-4841668842679697408-n.jpg" alt="Banque Populaire">
                <img src="https://i.ibb.co/DsrmQ94/al-barid-bank-logo.jpg" alt="Al Barid Bank">
                <img src="https://i.ibb.co/JjCBp412/Orange-logo.jpg" alt="Orange">
                <img src="https://i.ibb.co/DdFCbwD/482796598-10075022319194319-8766807728744015663-n.jpg" alt="Cash Plus">
                <img src="https://play-lh.googleusercontent.com/wpG8fI-_4FPPQv7m90bCSbPt8xJmBp9v2QI-R6SYkXXxA0uy2bR_BDnT4yoL7No57qA" alt="inwi">
            </div>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="container">
            <footer class="footer">
                <p>ยฉ 2025 K4HLD STORE - ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
                <div class="social-links">
                    <a href="https://wa.me/212770306095" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://www.instagram.com/k4h_d?igsh=dmN1bnJ1ZXozNm53" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://t.me/k4hldchannel" target="_blank" title="Telegram"><i class="fab fa-telegram-plane"></i></a>
                </div> 
            </footer>
        </div>
    </section>
    
    <div id="welcomePopup" style="display: none;">
        <div class="popup-content">
            <h2>โ๏ธ ุฅุดุนุงุฑ ูุงู</h2>
            <p>
                **ุงููููุน ุญุงููุงู ููุฏ ุงูุชุฌุฑุจุฉ ูุงูุชุทููุฑุ ุดูุฑุงู ุนูู ุชููููู.**
            </p>
            <button onclick="closePopup()">ุฅุบูุงู ููุชุงุจุนุฉ ุงูุชุตูุญ</button>
        </div>
    </div>
    
    <script>
        // ูุฐู ุงูุฏุงูุฉ ุชูุธูุฑ ุงููุงูุฐุฉ ุงูููุจุซูุฉ
        function showModal() {
            document.getElementById('importantNotificationModal').classList.add('active');
        }
    
        // ูุฐู ุงูุฏุงูุฉ ุชูุฎูู ุงููุงูุฐุฉ ุงูููุจุซูุฉ
        function closeModal() {
            document.getElementById('importantNotificationModal').classList.remove('active');
        }
    
        window.onload = function() {
             // ูููู ุชูุนูู showModal() ููุง ูุงุญูุงู ุฅุฐุง ุฃุฑุฏุช
        };
    </script>
    
    <a href="https://wa.me/212770306095?text=ูุฑุญุจุง ๐! ุฃุฑูุฏ ุงูุญุตูู ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช!" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i>
    </a>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script>
        // 2. ุชููุฆุฉ Firebase - (ุชู ูุตู ุงูููู ุงูุฎุงุตุฉ ุจู ููุง)
        const firebaseConfig = {
            apiKey: "AIzaSyCg4Pg1oGAZNIvIH-M79bY5aPOn2IRnxtg", 
            authDomain: "service-store-auth.firebaseapp.com",
            projectId: "service-store-auth",
            storageBucket: "service-store-auth.firebasestorage.app",
            messagingSenderId: "727304309601",
            appId: "1:727304309601:web:7ededd4f42d39f61b9d320"
        };

        // ุชููุฆุฉ ุงูุชุทุจูู ูุงูุฎุฏูุงุช
        const app = firebase.initializeApp(firebaseConfig);
        const auth = app.auth();
        const db = app.firestore();

        // 3. ููุฏ JavaScript ูููุธุงุฆู
        document.addEventListener('DOMContentLoaded', () => {
            // ุงูุนูุงุตุฑ (Elements)
            const authSection = document.getElementById('firebase-auth-section');
            const authLink = document.getElementById('auth-link');
            const authUI = document.getElementById('auth-ui');
            const purchaseSection = document.getElementById('purchase-section');
            const userEmailDisplay = document.getElementById('user-email-display');
            const historyList = document.getElementById('history-list');
            const statusMessage = document.getElementById('status-message');
            
            // ููุงุฐุฌ (Forms)
            const signupForm = document.getElementById('signup-form');
            const loginForm = document.getElementById('login-form');
            const logoutBtn = document.getElementById('logout-btn');
            const addPurchaseBtn = document.getElementById('add-purchase-btn');
            const itemNameInput = document.getElementById('item-name');
            const itemPriceInput = document.getElementById('item-price');

            // ูุธููุฉ ุนุฑุถ/ุฅุฎูุงุก ูุณู Firebase
            authLink.addEventListener('click', (e) => {
                e.preventDefault();
                // ุชุจุฏูู ุญุงูุฉ ุงูุนุฑุถ (ุฅุธูุงุฑ/ุฅุฎูุงุก)
                authSection.style.display = authSection.style.display === 'none' ? 'block' : 'none';
            });
            
            // =======================================================
            // ูุธููุฉ (1): ุงูุชุณุฌูู ูู Firebase
            // =======================================================
            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                statusMessage.textContent = '';
                
                const email = signupForm['signup-email'].value;
                const password = signupForm['signup-password'].value;
                
                try {
                    await auth.createUserWithEmailAndPassword(email, password);
                    statusMessage.textContent = 'ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ! ุณูุชู ุชุณุฌูู ุงูุฏุฎูู ุชููุงุฆูุงู.';
                } catch (error) {
                    statusMessage.textContent = `ุฎุทุฃ ูู ุงูุชุณุฌูู: ${error.message}`;
                    console.error(error);
                }
            });

            // =======================================================
            // ูุธููุฉ (2): ุชุณุฌูู ุงูุฏุฎูู ูู Firebase
            // =======================================================
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                statusMessage.textContent = '';
                
                const email = loginForm['login-email'].value;
                const password = loginForm['login-password'].value;
                
                try {
                    await auth.signInWithEmailAndPassword(email, password);
                    statusMessage.textContent = 'ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!';
                } catch (error) {
                    statusMessage.textContent = `ุฎุทุฃ ูู ุงูุฏุฎูู: ${error.message}`;
                    console.error(error);
                }
            });
            
            // =======================================================
            // ูุธููุฉ (3): ุชุณุฌูู ุงูุฎุฑูุฌ
            // =======================================================
            logoutBtn.addEventListener('click', async () => {
                await auth.signOut();
                statusMessage.textContent = 'ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ.';
            });

            // =======================================================
            // ูุธููุฉ (4): ุญูุธ ุณุฌู ุงูุดุฑุงุก ูู Firestore
            // =======================================================
            addPurchaseBtn.addEventListener('click', async () => {
                const user = auth.currentUser;
                if (!user) {
                    statusMessage.textContent = 'ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูุฅุถุงูุฉ ุณุฌู ุดุฑุงุก.';
                    return;
                }

                const itemName = itemNameInput.value.trim();
                const itemPrice = parseFloat(itemPriceInput.value);

                if (!itemName || isNaN(itemPrice) || itemPrice <= 0) {
                    statusMessage.textContent = 'ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงูููุชุฌ ูุณุนุฑ ุตุญูุญ.';
                    return;
                }

                try {
                    // ุฅุถุงูุฉ ุจูุงูุงุช ุงูุดุฑุงุก ุฅูู ูุฌููุนุฉ /users/{UID}/purchases
                    await db.collection('users').doc(user.uid)
                            .collection('purchases').add({
                        itemName: itemName,
                        price: itemPrice,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp() // ููุช ุงูุฎุงุฏู
                    });

                    statusMessage.textContent = `ุชู ุชูุซูู ุดุฑุงุก "${itemName}" ุจูุฌุงุญ!`;
                    itemNameInput.value = '';
                    itemPriceInput.value = '';
                } catch (error) {
                    statusMessage.textContent = `ุฎุทุฃ ูู ุงูุญูุธ: ${error.message}`;
                    console.error('Error adding document: ', error);
                }
            });

            // =======================================================
            // ูุธููุฉ (5): ุฌูุจ ุณุฌู ุงูุดุฑุงุก ูุนุฑุถ ุงููุงุฌูุฉ ุญุณุจ ุญุงูุฉ ุงููุณุชุฎุฏู
            // =======================================================
            
            // ูุธููุฉ ุฌูุจ ูุนุฑุถ ุงูุณุฌูุงุช
            const loadPurchaseHistory = (user) => {
                if (!user) return;
                
                historyList.innerHTML = '<li>ุฌุงุฑู ุชุญููู ุงูุณุฌูุงุช...</li>';
                
                // ุงูุงุณุชูุงุน ููุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูู ุงูููุช ุงููุนูู)
                db.collection('users').doc(user.uid).collection('purchases')
                    .orderBy('timestamp', 'desc') // ุนุฑุถ ุงูุฃุญุฏุซ ุฃููุงู
                    .onSnapshot((snapshot) => {
                        historyList.innerHTML = ''; // ูุณุญ ุงููุงุฆูุฉ ุงููุฏููุฉ
                        
                        if (snapshot.empty) {
                            historyList.innerHTML = '<li>ูุง ุชูุฌุฏ ุณุฌูุงุช ุดุฑุงุก ุญุชู ุงูุขู.</li>';
                            return;
                        }

                        snapshot.forEach((doc) => {
                            const data = doc.data();
                            const li = document.createElement('li');
                            const date = data.timestamp ? data.timestamp.toDate().toLocaleDateString('ar-MA') : 'ุบูุฑ ูุชููุฑ';
                            
                            li.textContent = `
                                [${date}] - ุงูููุชุฌ: ${data.itemName} - ุงููููุฉ: ${data.price} ุฏุฑูู
                            `;
                            historyList.appendChild(li);
                        });
                    }, (error) => {
                        console.error('Error listening to history: ', error);
                        historyList.innerHTML = '<li>ุฎุทุฃ ูู ุฌูุจ ุงูุณุฌูุงุช.</li>';
                    });
            };


            // ูุธููุฉ ุชุญุฏูุซ ุงููุงุฌูุฉ ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงููุตุงุฏูุฉ
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // ุญุงูุฉ: ุชุณุฌูู ุงูุฏุฎูู (Logged In)
                    userEmailDisplay.textContent = user.email;
                    authUI.style.display = 'none';
                    purchaseSection.style.display = 'block';
                    loadPurchaseHistory(user); // ุฌูุจ ุงูุณุฌู
                } else {
                    // ุญุงูุฉ: ุชุณุฌูู ุงูุฎุฑูุฌ (Logged Out)
                    userEmailDisplay.textContent = '';
                    historyList.innerHTML = '<li>ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูุนุฑุถ ุงูุณุฌู.</li>';
                    authUI.style.display = 'block';
                    purchaseSection.style.display = 'none';
                }
            });
            
            // ููุฏ ูุฎุตุต ูุฒุฑ "ุนุฑุถ ุงูููุชุฌุงุช" ูุฎุฏูุงุช ุงูุชูุงุตู ุงูุงุฌุชูุงุนู (ุชูุจูู "ุณูุชููุฑ ูุฑูุจุงู")
            const smmButton = document.getElementById('smm-soon-btn');
    
            if (smmButton) {
                smmButton.addEventListener('click', (event) => {
                    event.preventDefault(); 
                    alert("ุณูุชููุฑ ูุฑูุจุงู");
                });
            }
        });
    </script>

</body>
</html>
